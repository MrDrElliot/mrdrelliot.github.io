<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.145453261a7755f5042a854c4213501d215a8fbe34c08d181c40f803f1315e74.js"></script>





  



    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=favicon.png>

    
    





  





  
  
  


<!-- Open Graph image and Twitter Card metadata -->

<title itemprop="name">Dr. Elliot - What Are Soft References?</title>
<meta property="og:title" content=Dr.&#32;Elliot&#32;-&#32;What&#32;Are&#32;Soft&#32;References? />
<meta name="twitter:title" content=Dr.&#32;Elliot&#32;-&#32;What&#32;Are&#32;Soft&#32;References? />
<meta itemprop="name" content=Dr.&#32;Elliot&#32;-&#32;What&#32;Are&#32;Soft&#32;References? />
<meta name="application-name" content=Dr.&#32;Elliot&#32;-&#32;What&#32;Are&#32;Soft&#32;References? />
<meta property="og:site_name" content="Dr. Elliot" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="https://mrdrelliot.github.io/memory/softreferences/" />
<link rel="canonical" href="https://mrdrelliot.github.io/memory/softreferences/" itemprop="url" />
<meta name="url" content="https://mrdrelliot.github.io/memory/softreferences/" />
<meta name="twitter:url" content="https://mrdrelliot.github.io/memory/softreferences/" />
<meta property="og:url" content="https://mrdrelliot.github.io/memory/softreferences/" />


<meta property="og:updated_time" content="2024-08-16T14:31:08-05:00" />


<link rel="sitemap" type="application/xml" title="Sitemap" href='https://mrdrelliot.github.io/sitemap.xml' />

<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />



<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Dr. Elliot" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.132.2">


    
    

<link type="text/css" rel="stylesheet" href="/css/bundle.min.94a339836f89f0d25f31980cb6b0631da21e20af128308747ce44e0525eb16ef.css">


    
    <style>
    body {
        --sidebar-bg-color: #202020;
        --sidebar-img-border-color: #515151;
        --sidebar-p-color: #909090;
        --sidebar-h1-color: #FFF;
        --sidebar-a-color: #FFF;
        --sidebar-socials-color: #FFF;
        --text-color: #222;
        --bkg-color: #FAF9F6;
        --post-title-color: #303030;
        --list-color: #5A5A5A;
        --link-color: #268BD2;
        --date-color: #515151;
        --table-border-color: #E5E5E5;
        --table-stripe-color: #F9F9F9;
        --code-color: #000;
        --code-background-color: #E5E5E5;
        --code-block-color: #FFF;
        --code-block-background-color: #272822;
        --moon-sun-color: #FFF;
        --moon-sun-background-color: #515151;
    }
    body.dark-theme {
        --text-color: #EEE;
        --bkg-color: #121212;
        --post-title-color: #DBE2E9;
        --list-color: #9D9D9D;
        --link-color: #268BD2;
        --date-color: #9A9A9A;
        --table-border-color: #515151;
        --table-stripe-color: #202020;
        --code-color: #FFF;
        --code-background-color: #515151;
        --code-block-color: #FFF;
        --code-block-background-color: #272822;
    }
    body {
        background-color: var(--bkg-color);
    }
</style>

</head>

    <body class="dark-theme">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
            <a href="https://mrdrelliot.github.io/">
                <img src="https://github.com/mrdrelliot.png" alt="brand image">
            </a>
        
        
            <a href="https://mrdrelliot.github.io/">
                <h1>Dr. Elliot</h1>
            </a>
        
    </h1>
    <p class="lead">
    A collection of things I've learned using Unreal Engine.
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">

        
        
        
        
            

            
                
                
                    <li class="heading">
                        <a href="/about/">About</a>
                    </li>
                    
                
            
                
                
            
                
                
            
                
                
            
                
                
            
                
                
            
                
                
            
            
                
                
            
                
                
            
        
        
            

            
                
                
            
                
                
            
                
                
                    <li class="heading">
                        <a href="/general/">General</a>
                    </li>
                    
                        <li class="sub-heading">
                            
                        </li>
                        
                            <li class="bullet">
                                <a href="https://mrdrelliot.github.io/general/bpvscpp/">Blueprint vs C&#43;&#43;: Different Tools for Different Jobs</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://mrdrelliot.github.io/general/constexpr/">Constexpr and Consteval</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://mrdrelliot.github.io/general/inheritenceoveruse/">Overuse of Inheritence, alternatives.</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://mrdrelliot.github.io/general/lambdadangers/">The dangers of Lambdas</a>
                            </li>
                        
                    
                
            
                
                
            
                
                
            
                
                
            
                
                
            
            
                
                
            
                
                
            
        
        
            

            
                
                
            
                
                
            
                
                
            
                
                
            
                
                
            
                
                
            
                
                
                    <li class="heading">
                        <a href="/optimization/">Optimizations</a>
                    </li>
                    
                        <li class="sub-heading">
                            
                        </li>
                        
                            <li class="bullet">
                                <a href="https://mrdrelliot.github.io/optimization/thecastscare/">The Cast Scare</a>
                            </li>
                        
                    
                
            
            
                
                
            
                
                
            
        
        
            

            
                
                
            
                
                
            
                
                
            
                
                
            
                
                
            
                
                
                    <li class="heading">
                        <a href="/networking/">Networking</a>
                    </li>
                    
                        <li class="sub-heading">
                            
                        </li>
                        
                            <li class="bullet">
                                <a href="https://mrdrelliot.github.io/networking/networkserialization/">Network Serialization</a>
                            </li>
                        
                    
                
            
                
                
            
            
                
                
            
                
                
            
        
        
            

            
                
                
            
                
                
            
                
                
            
                
                
            
                
                
                    <li class="heading">
                        <a href="/memory/">Memory</a>
                    </li>
                    
                        <li class="sub-heading">
                            
                        </li>
                        
                            <li class="bullet">
                                <a href="https://mrdrelliot.github.io/memory/tarrayallocators/">TArray Allocators</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://mrdrelliot.github.io/memory/templateobjecttypes/">Templated Object Types</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://mrdrelliot.github.io/memory/softreferences/">What Are Soft References?</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://mrdrelliot.github.io/memory/buffers/">Working With Buffers</a>
                            </li>
                        
                    
                
            
                
                
            
                
                
            
            
                
                
            
                
                
            
        
        
            

            
                
                
            
                
                
                    <li class="heading">
                        <a href="/gas/">Gameplay Ability System</a>
                    </li>
                    
                        <li class="sub-heading">
                            
                        </li>
                        
                            <li class="bullet">
                                <a href="https://mrdrelliot.github.io/gas/intro/">Intro</a>
                            </li>
                        
                    
                
            
                
                
            
                
                
            
                
                
            
                
                
            
                
                
            
            
                
                
            
                
                
            
        

    </ul>
</nav>

        








    <a target="_blank" class="social" title="Discord" href="https://discord.gg/WTqSFrBg6t">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 24 24">
            <path fill="currentColor" d="M19.27 5.33C17.94 4.71 16.5 4.26 15 4a.09.09 0 0 0-.07.03c-.18.33-.39.76-.53 1.09a16.09 16.09 0 0 0-4.8 0c-.14-.34-.35-.76-.54-1.09c-.01-.02-.04-.03-.07-.03c-1.5.26-2.93.71-4.27 1.33c-.01 0-.02.01-.03.02c-2.72 4.07-3.47 8.03-3.1 11.95c0 .02.01.04.03.05c1.8 1.32 3.53 2.12 5.24 2.65c.03.01.06 0 .07-.02c.4-.55.76-1.13 1.07-1.74c.02-.04 0-.08-.04-.09c-.57-.22-1.11-.48-1.64-.78c-.04-.02-.04-.08-.01-.11c.11-.08.22-.17.33-.25c.02-.02.05-.02.07-.01c3.44 1.57 7.15 1.57 10.55 0c.02-.01.05-.01.07.01c.11.09.22.17.33.26c.04.03.04.09-.01.11c-.52.31-1.07.56-1.64.78c-.04.01-.05.06-.04.09c.32.61.68 1.19 1.07 1.74c.03.01.06.02.09.01c1.72-.53 3.45-1.33 5.25-2.65c.02-.01.03-.03.03-.05c.44-4.53-.73-8.46-3.1-11.95c-.01-.01-.02-.02-.04-.02zM8.52 14.91c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.84 2.12-1.89 2.12zm6.97 0c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.83 2.12-1.89 2.12z"/>
        </svg>
    </a>










    <a target="_blank" class="social" title="Email" href="mailto://mrdrelliot@gmail.com">
       <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 485.211 485.211">
            <path fill="currentColor" d="M301.393,241.631L464.866,424.56H20.332l163.474-182.928l58.801,51.443L301.393,241.631z M462.174,60.651H23.027 l219.579,192.142L462.174,60.651z M324.225,221.67l160.986,180.151V80.792L324.225,221.67z M0,80.792v321.029L160.972,221.64 L0,80.792z"/>
       </svg>
    </a>




        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Dr. Elliot. All rights reserved.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <div class="info">
  <h1 class="post-title">
    <a href="https://mrdrelliot.github.io/memory/softreferences/">What Are Soft References?</a>
  </h1>

  <div class="headline">
    <div>
      
      
      <time datetime=" 2024-08-16T14:31:08-0500" class="post-date">
        August 16, 2024
      </time>
      
      <span> - </span>
      <span class="reading-time">
        
          
        

        <span>5 mins read</span>
      </span>
    </div>

    
  </div>

  
  

  
</div>

  <h1 id="what-are-soft-references">What Are Soft References?</h1>
<hr>
<p>Soft references are a way to <em>reference</em> an object in Unreal Engine without forcing it to stay in memory. This can be incredibly useful in scenarios where you need to reference assets like textures, sounds, or even entire levels, but don’t want to load them into memory until absolutely necessary.</p>
<h3 id="why-use-soft-references">Why Use Soft References?</h3>
<p>Imagine your game has a massive library of assets. Loading everything at once would quickly consume your memory, leading to performance issues or, worse, crashing your game. This is where soft references come in handy. They allow you to keep a &ldquo;pointer&rdquo; to an asset, but the asset itself is not loaded into memory until you explicitly tell it to.</p>
<p>Think of soft references as an invitation to a party—you have the address (the reference), but you don’t actually show up at the party (load the asset) until you decide it’s time to go. This way, you avoid overcrowding (memory overload) and only arrive (load the asset) when it’s relevant to the gameplay.</p>
<h3 id="how-do-soft-references-work">How Do Soft References Work?</h3>
<p>Soft references in Unreal are often used with the <code>TSoftObjectPtr</code> and <code>TSoftClassPtr</code> templates. These templates allow you to reference an object or class without immediately loading it into memory. When you need the object, you simply resolve the reference, which loads the asset at that moment.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>TSoftObjectPtr<span style="color:#f92672">&lt;</span>UTexture2D<span style="color:#f92672">&gt;</span> SoftTexture;
</span></span></code></pre></div><p>In the code above, <code>SoftTexture</code> is a soft reference to a texture. The texture isn’t loaded until you call <code>SoftTexture.LoadSynchronous()</code>. Until then, it’s just a reference, taking up minimal memory.</p>
<h3 id="synchronous-loading-vs-asynchronous-loading">Synchronous Loading vs Asynchronous Loading</h3>
<p>When it comes to loading assets referenced by soft references, you have two main options: <strong>synchronous</strong> loading and <strong>asynchronous</strong> loading.</p>
<h4 id="synchronous-loading">Synchronous Loading</h4>
<p>Synchronous loading means that the asset is loaded immediately, and the game waits until this process is complete before continuing. This is straightforward and ensures the asset is available right when you need it. However, it also means that the game will pause (or experience a hitch) while the asset loads, which can lead to noticeable frame drops or stuttering, especially if the asset is large or the game is running on hardware with limited resources.</p>
<p>In the earlier example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>SoftTexture.LoadSynchronous();
</span></span></code></pre></div><p>This method blocks everything else until the texture is fully loaded, which is great for critical assets that must be available right away but can cause issues in scenarios where smooth gameplay is crucial.</p>
<h4 id="asynchronous-loading">Asynchronous Loading</h4>
<p>Asynchronous loading, on the other hand, loads the asset in the background, allowing the game to continue running smoothly. This is particularly useful for assets that don’t need to be immediately available or for situations where you want to avoid disrupting the player’s experience.</p>
<p>To load an asset asynchronously, you typically use a function like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>TSoftObjectPtr<span style="color:#f92672">&lt;</span>UTexture2D<span style="color:#f92672">&gt;</span> SoftTexture;
</span></span><span style="display:flex;"><span>UAssetManager<span style="color:#f92672">::</span>GetStreamableManager().RequestAsyncLoad(SoftTexture.ToSoftObjectPath(), FStreamableDelegate<span style="color:#f92672">::</span>CreateWeakLambda(<span style="color:#66d9ef">this</span>, [SoftTexture]
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    SoftTexture.LoadSynchronous(); <span style="color:#75715e">/* Either .Get() or .LoadSynchronous(), the object is already loaded either way */</span>
</span></span><span style="display:flex;"><span>}));
</span></span></code></pre></div><p>With asynchronous loading, the game doesn&rsquo;t stop to wait for the asset to load, which helps maintain performance. However, this also means you need to handle the case where the asset isn’t ready when you need it. You might need to display a placeholder or delay an action until the asset is fully loaded.</p>
<h3 id="issues-with-synchronous-and-asynchronous-loading">Issues with Synchronous and Asynchronous Loading</h3>
<p>Both methods come with trade-offs:</p>
<ul>
<li>
<p><strong>Synchronous Loading</strong>: The primary issue is the potential for hitches or pauses in gameplay, especially when loading large assets. It’s simple but can be disruptive if not used carefully.</p>
</li>
<li>
<p><strong>Asynchronous Loading</strong>: While it helps maintain smooth gameplay, it requires additional logic to handle the period where the asset is not yet available. If not managed well, this can lead to missing assets or awkward transitions in gameplay.</p>
</li>
</ul>
<h3 id="when-should-you-use-each">When Should You Use Each?</h3>
<p>The choice between synchronous and asynchronous loading depends on your game’s needs:</p>
<ul>
<li>Use <strong>synchronous loading</strong> for assets that are critical and need to be available immediately, but be mindful of potential hitches.</li>
<li>Use <strong>asynchronous loading</strong> for assets that can load in the background without affecting the immediate gameplay experience, but ensure you have a plan for handling the absence of the asset during the load.</li>
</ul>
<h3 id="when-soft-references-might-not-be-the-best-choice">When Soft References Might Not Be the Best Choice</h3>
<p>While soft references are powerful, they aren’t always the optimal solution. Here are a few scenarios where soft references might not make sense:</p>
<ol>
<li>
<p><strong>Frequently Used Assets</strong>: If an asset is used frequently throughout the game, such as core UI elements, main character models, or constantly played sound effects, it might be more efficient to use a hard reference or preload the asset. The overhead of constantly resolving a soft reference might outweigh the memory savings.</p>
</li>
<li>
<p><strong>Critical Path Assets</strong>: For assets that are essential to the game’s primary gameplay loop or are needed instantly during gameplay, soft references might introduce unwanted delays. In such cases, preloading or using a hard reference ensures the asset is always ready.</p>
</li>
<li>
<p><strong>Small Assets</strong>: For small assets that don’t consume much memory, the benefit of using soft references diminishes. It might be simpler to keep these assets loaded rather than managing their load states through soft references.</p>
</li>
<li>
<p><strong>Assets Already Loaded by Other Means</strong>: If an asset is already loaded into memory because it’s part of a larger loaded package (like a level or a character model), using a soft reference to the same asset might be redundant and unnecessary.</p>
</li>
<li>
<p><strong>Streaming Levels</strong>: When using Unreal’s level streaming system, certain assets might be better managed through the level’s streaming setup rather than through soft references. Streaming levels handle the memory management for you, so adding another layer of soft reference management might complicate things unnecessarily.</p>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>Soft references are a powerful tool in Unreal Engine that give you greater control over memory management and asset loading. They are ideal for managing memory in large games or for assets that aren’t always needed immediately. However, they are not a one-size-fits-all solution. For assets that are frequently used, critical to gameplay, or already managed by other systems, hard references or preloading might be a better choice.</p>
<p>By understanding when and how to use soft references, and recognizing when they might not be the best fit, you can optimize your game’s performance while keeping memory usage in check. This balanced approach is key to maintaining a smooth and efficient gaming experience.</p>

  
  <hr>
<div class="footer">
    
	    
            <a class="previous-post" href="https://mrdrelliot.github.io/memory/buffers/?ref=footer"><span style="font-weight:bold;">« Previous</span><br>Working With Buffers</a>
        
	    
            <div class="next-post">
                <a href="https://mrdrelliot.github.io/memory/templateobjecttypes/?ref=footer"><span style="font-weight:bold;">Next »</span><br>Templated Object Types</a>
            </div>
        
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#why-use-soft-references">Why Use Soft References?</a></li>
        <li><a href="#how-do-soft-references-work">How Do Soft References Work?</a></li>
        <li><a href="#synchronous-loading-vs-asynchronous-loading">Synchronous Loading vs Asynchronous Loading</a></li>
        <li><a href="#issues-with-synchronous-and-asynchronous-loading">Issues with Synchronous and Asynchronous Loading</a></li>
        <li><a href="#when-should-you-use-each">When Should You Use Each?</a></li>
        <li><a href="#when-soft-references-might-not-be-the-best-choice">When Soft References Might Not Be the Best Choice</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

  

        </div>
    </body>
</html>
