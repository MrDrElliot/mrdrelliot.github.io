<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.145453261a7755f5042a854c4213501d215a8fbe34c08d181c40f803f1315e74.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.png>

    
    





  





  
  
  


<!-- Open Graph image and Twitter Card metadata -->

<title itemprop="name">Dr. Elliot - </title>
<meta property="og:title" content=Dr.&#32;Elliot&#32;-&#32; />
<meta name="twitter:title" content=Dr.&#32;Elliot&#32;-&#32; />
<meta itemprop="name" content=Dr.&#32;Elliot&#32;-&#32; />
<meta name="application-name" content=Dr.&#32;Elliot&#32;-&#32; />
<meta property="og:site_name" content="Dr. Elliot" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="http://localhost:1313/post/networkserialization/" />
<link rel="canonical" href="http://localhost:1313/post/networkserialization/" itemprop="url" />
<meta name="url" content="http://localhost:1313/post/networkserialization/" />
<meta name="twitter:url" content="http://localhost:1313/post/networkserialization/" />
<meta property="og:url" content="http://localhost:1313/post/networkserialization/" />


<meta property="og:updated_time" content="0001-01-01T00:00:00Z" />


<link rel="sitemap" type="application/xml" title="Sitemap" href='http://localhost:1313/sitemap.xml' />

<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />



<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Dr. Elliot" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.132.2">


    
    

<link type="text/css" rel="stylesheet" href="/css/bundle.min.94a339836f89f0d25f31980cb6b0631da21e20af128308747ce44e0525eb16ef.css">


    
    <style>
    body {
        --sidebar-bg-color: #202020;
        --sidebar-img-border-color: #515151;
        --sidebar-p-color: #909090;
        --sidebar-h1-color: #FFF;
        --sidebar-a-color: #FFF;
        --sidebar-socials-color: #FFF;
        --text-color: #222;
        --bkg-color: #FAF9F6;
        --post-title-color: #303030;
        --list-color: #5A5A5A;
        --link-color: #268BD2;
        --date-color: #515151;
        --table-border-color: #E5E5E5;
        --table-stripe-color: #F9F9F9;
        --code-color: #000;
        --code-background-color: #E5E5E5;
        --code-block-color: #FFF;
        --code-block-background-color: #272822;
        --moon-sun-color: #FFF;
        --moon-sun-background-color: #515151;
    }
    body.dark-theme {
        --text-color: #EEE;
        --bkg-color: #121212;
        --post-title-color: #DBE2E9;
        --list-color: #9D9D9D;
        --link-color: #268BD2;
        --date-color: #9A9A9A;
        --table-border-color: #515151;
        --table-stripe-color: #202020;
        --code-color: #FFF;
        --code-background-color: #515151;
        --code-block-color: #FFF;
        --code-block-background-color: #272822;
    }
    body {
        background-color: var(--bkg-color);
    }
</style>

</head>

    <body class="dark-theme">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
        
            <a href="http://localhost:1313/">
                <h1>Dr. Elliot</h1>
            </a>
        
    </h1>
    <p class="lead">
    A collection of things I've learned using Unreal Engine.
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">

        
        
        
        
            

            
                
                
                    <li class="heading">
                        <a href="/about/">About</a>
                    </li>
                    
                
            
                
                
            
                
                
            
            
                
                
            
                
                
            
        
        
            

            
                
                
            
                
                
            
                
                
                    <li class="heading">
                        <a href="/posts/">Posts</a>
                    </li>
                    
                        <li class="sub-heading">
                            Recent
                        </li>
                        
                            <li class="bullet">
                                <a href="http://localhost:1313/posts/networking/networkserialization/">Network Serialization</a>
                            </li>
                        
                    
                
            
            
                
                
            
                
                
            
        

    </ul>
</nav>

        








    <a target="_blank" class="social" title="Discord" href="https://discord.gg/WTqSFrBg6t">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 24 24">
            <path fill="currentColor" d="M19.27 5.33C17.94 4.71 16.5 4.26 15 4a.09.09 0 0 0-.07.03c-.18.33-.39.76-.53 1.09a16.09 16.09 0 0 0-4.8 0c-.14-.34-.35-.76-.54-1.09c-.01-.02-.04-.03-.07-.03c-1.5.26-2.93.71-4.27 1.33c-.01 0-.02.01-.03.02c-2.72 4.07-3.47 8.03-3.1 11.95c0 .02.01.04.03.05c1.8 1.32 3.53 2.12 5.24 2.65c.03.01.06 0 .07-.02c.4-.55.76-1.13 1.07-1.74c.02-.04 0-.08-.04-.09c-.57-.22-1.11-.48-1.64-.78c-.04-.02-.04-.08-.01-.11c.11-.08.22-.17.33-.25c.02-.02.05-.02.07-.01c3.44 1.57 7.15 1.57 10.55 0c.02-.01.05-.01.07.01c.11.09.22.17.33.26c.04.03.04.09-.01.11c-.52.31-1.07.56-1.64.78c-.04.01-.05.06-.04.09c.32.61.68 1.19 1.07 1.74c.03.01.06.02.09.01c1.72-.53 3.45-1.33 5.25-2.65c.02-.01.03-.03.03-.05c.44-4.53-.73-8.46-3.1-11.95c-.01-.01-.02-.02-.04-.02zM8.52 14.91c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.84 2.12-1.89 2.12zm6.97 0c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.83 2.12-1.89 2.12z"/>
        </svg>
    </a>













        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Dr. Elliot. All rights reserved.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <div class="info">
  <h1 class="post-title">
    <a href="http://localhost:1313/post/networkserialization/"></a>
  </h1>

  <div class="headline">
    <div>
      
      
      <span> - </span>
      <span class="reading-time">
        
          
        

        <span>3 mins read</span>
      </span>
    </div>

    
  </div>

  
  

  
</div>

  <p>Certainly! Here’s an article about network serialization in Unreal Engine C++:</p>
<hr>
<p>+++
title = &ldquo;Network Serialization in Unreal Engine C++&rdquo;
date = 2024-08-16T10:28:54-05:00
+++</p>
<p>Hello, I wanted to talk about some ways you can improve networking performance in C++ by understanding and implementing efficient network serialization in Unreal Engine. Effective serialization is critical for transmitting data across the network without unnecessary overhead, especially in multiplayer games where bandwidth is limited.</p>
<h3 id="what-is-network-serialization">What is Network Serialization?</h3>
<p>Serialization in the context of networking refers to the process of converting data into a format that can be easily transmitted over a network and reconstructed later. In Unreal Engine, this process is crucial for ensuring that game states, variables, and objects are accurately synchronized between clients and servers.</p>
<h3 id="unreal-engines-built-in-serialization">Unreal Engine&rsquo;s Built-in Serialization</h3>
<p>Unreal Engine provides built-in support for serialization with its powerful reflection system. This system can automatically serialize properties marked with specific macros, making it easy to sync variables across the network.</p>
<p>Here’s an example of a simple struct that can be serialized:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>USTRUCT(BlueprintType)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">FPlayerData</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    GENERATED_BODY()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Player Data&#34;</span>)
</span></span><span style="display:flex;"><span>    int32 Health;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Player Data&#34;</span>)
</span></span><span style="display:flex;"><span>    int32 Armor;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    UPROPERTY(EditAnywhere, BlueprintReadWrite, Category<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Player Data&#34;</span>)
</span></span><span style="display:flex;"><span>    FVector Location;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Serializes the data for network transmission
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">friend</span> FArchive<span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">operator</span><span style="color:#f92672">&lt;&lt;</span>(FArchive<span style="color:#f92672">&amp;</span> Ar, FPlayerData<span style="color:#f92672">&amp;</span> Data)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Ar <span style="color:#f92672">&lt;&lt;</span> Data.Health;
</span></span><span style="display:flex;"><span>        Ar <span style="color:#f92672">&lt;&lt;</span> Data.Armor;
</span></span><span style="display:flex;"><span>        Ar <span style="color:#f92672">&lt;&lt;</span> Data.Location;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Ar;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>In this example, the <code>FPlayerData</code> struct contains the player&rsquo;s health, armor, and location. The <code>operator&lt;&lt;</code> overload is implemented to serialize these properties, ensuring that they can be packed into a network packet and sent over the network.</p>
<h3 id="implementing-network-serialization-in-a-player-class">Implementing Network Serialization in a Player Class</h3>
<p>Let’s take it a step further and see how this serialization works within a player class.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> AMyPlayerState<span style="color:#f92672">::</span>GetLifetimeReplicatedProps(TArray<span style="color:#f92672">&lt;</span>FLifetimeProperty<span style="color:#f92672">&gt;&amp;</span> OutLifetimeProps) <span style="color:#66d9ef">const</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Super<span style="color:#f92672">::</span>GetLifetimeReplicatedProps(OutLifetimeProps);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use DOREPLIFETIME to ensure these properties are replicated
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    DOREPLIFETIME(AMyPlayerState, PlayerData);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> AMyPlayerState<span style="color:#f92672">::</span>Serialize(FArchive<span style="color:#f92672">&amp;</span> Ar)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Super<span style="color:#f92672">::</span>Serialize(Ar);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Ar <span style="color:#f92672">&lt;&lt;</span> PlayerData;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In this code snippet:</p>
<ul>
<li><code>GetLifetimeReplicatedProps</code> is used to define the properties that should be replicated to clients. Here, <code>PlayerData</code> is marked for replication using <code>DOREPLIFETIME</code>.</li>
<li>The <code>Serialize</code> function is overridden to handle custom serialization of the <code>PlayerData</code> struct.</li>
</ul>
<h3 id="optimizing-serialization-for-performance">Optimizing Serialization for Performance</h3>
<p>While Unreal Engine handles a lot of serialization automatically, there are ways to optimize it for better performance:</p>
<ol>
<li>
<p><strong>Minimize Data Transmission</strong>: Only serialize and send the data that is absolutely necessary. Avoid transmitting redundant or static data that doesn&rsquo;t change often.</p>
</li>
<li>
<p><strong>Use Compression</strong>: If you’re sending large amounts of data, consider compressing it before serialization. Unreal Engine provides built-in functions like <code>FArchive</code> for this purpose.</p>
</li>
<li>
<p><strong>Custom Serialization</strong>: For complex objects, implement custom serialization logic to control exactly how data is packed and unpacked, which can reduce the size of your network packets.</p>
</li>
</ol>
<h3 id="example-custom-serialization-with-compression">Example: Custom Serialization with Compression</h3>
<p>Here’s a quick example of custom serialization with compression:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> AMyPlayerState<span style="color:#f92672">::</span>SerializeCompressedData(FArchive<span style="color:#f92672">&amp;</span> Ar)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (Ar.IsSaving())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        TArray<span style="color:#f92672">&lt;</span>uint8<span style="color:#f92672">&gt;</span> UncompressedData;
</span></span><span style="display:flex;"><span>        FMemoryWriter <span style="color:#a6e22e">MemoryWriter</span>(UncompressedData, true);
</span></span><span style="display:flex;"><span>        MemoryWriter <span style="color:#f92672">&lt;&lt;</span> PlayerData;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Compress the data
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        TArray<span style="color:#f92672">&lt;</span>uint8<span style="color:#f92672">&gt;</span> CompressedData;
</span></span><span style="display:flex;"><span>        FCompression<span style="color:#f92672">::</span>CompressMemory(NAME_Zlib, CompressedData.GetData(), CompressedData.Max(), UncompressedData.GetData(), UncompressedData.Num());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Serialize compressed data
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Ar <span style="color:#f92672">&lt;&lt;</span> CompressedData;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span> (Ar.IsLoading())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        TArray<span style="color:#f92672">&lt;</span>uint8<span style="color:#f92672">&gt;</span> CompressedData;
</span></span><span style="display:flex;"><span>        Ar <span style="color:#f92672">&lt;&lt;</span> CompressedData;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        TArray<span style="color:#f92672">&lt;</span>uint8<span style="color:#f92672">&gt;</span> UncompressedData;
</span></span><span style="display:flex;"><span>        FCompression<span style="color:#f92672">::</span>UncompressMemory(NAME_Zlib, UncompressedData.GetData(), UncompressedData.Max(), CompressedData.GetData(), CompressedData.Num());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        FMemoryReader MemoryReader(UncompressedData, true);
</span></span><span style="display:flex;"><span>        MemoryReader <span style="color:#f92672">&lt;&lt;</span> PlayerData;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In this example, data is compressed using the Zlib algorithm before being serialized, reducing the amount of data transmitted over the network. When received, the data is uncompressed and deserialized back into the original format.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Efficient network serialization is essential for any multiplayer game developed in Unreal Engine. By understanding and optimizing how data is serialized, you can significantly reduce network overhead, leading to smoother and more responsive gameplay.</p>
<p>If you’re looking to enhance your game’s networking performance, start by analyzing what data you’re sending across the network and consider implementing custom serialization strategies to optimize it.</p>
<hr>
<p>By following these guidelines and examples, you&rsquo;ll be well on your way to improving your Unreal Engine project&rsquo;s networking performance. Happy coding!</p>

  
  <hr>
<div class="footer">
    
	    
	    
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#what-is-network-serialization">What is Network Serialization?</a></li>
        <li><a href="#unreal-engines-built-in-serialization">Unreal Engine&rsquo;s Built-in Serialization</a></li>
        <li><a href="#implementing-network-serialization-in-a-player-class">Implementing Network Serialization in a Player Class</a></li>
        <li><a href="#optimizing-serialization-for-performance">Optimizing Serialization for Performance</a></li>
        <li><a href="#example-custom-serialization-with-compression">Example: Custom Serialization with Compression</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

  

        </div>
    </body>
</html>
